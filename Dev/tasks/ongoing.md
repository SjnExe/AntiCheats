# Ongoing Tasks & Next Steps for Development

This document summarizes the current work-in-progress and pending tasks for the AntiCheat addon, intended for handoff to the next development session.

## I. Current Active Plan: Coding Style Review & Corrections - Batch 1 (Core Files)

*   - Corrected `DEFAULT_LANGUAGE` to `defaultLanguage` in `AntiCheatsBP/scripts/core/i18n.js` and updated its usages.
*   - Refactored `actionType` for logging in `AntiCheatsBP/scripts/core/eventHandlers.js` to `camelCase` (e.g., 'player_leave' to 'playerLeave').
*   - Refactored `actionType` for logging in `AntiCheatsBP/scripts/core/uiManager.js` to `camelCase` (e.g., 'config_update' to 'configUpdate').
*   - Updated JSDoc example for `ActionLogEntry.actionType` in `AntiCheatsBP/scripts/core/logManager.js` to reflect `camelCase` log types.
*   - Refactored logging in `AntiCheatsBP/scripts/core/reportManager.js` to use `playerUtils.debugLog` instead of `console.*` calls.
*   - Verified `AntiCheatsBP/scripts/core/tpaManager.js` already uses `playerUtils.debugLog` for its logging.
*   - Reviewed `actionManager.js`, `automodManager.js`, `commandManager.js`, `rankManager.js` and found them highly compliant with no new changes needed for general JS style (noting `automodManager.js`'s dependency on developer action for its internal `actionType` switch).

## II. General Pending Tasks (from `Dev/tasks/todo.md`)

These are higher-level features and areas for future development:

*   **Advanced Cheat Detections:**
    *   Packet Anomalies: Investigate and implement detections.
    *   Further Chat Violations (if any specific ones are identified beyond current checks).
*   **SjnExe Parity Goals (Broad Categories):**
    *   Admin Tools & Management Expansion.
    *   UI Enhancements (Admin Panel).
    *   System Features.
    *   World Management & Protection.
    *   Normal Player Panel Features (`!panel`):
*   **Specific Deferred/Considered Features:**
    *   `!worldborder`: Advanced dynamic particle effects (previously deferred).
    *   `!worldborder`: Support for more complex shapes (currently a consideration).
*   **AutoMod System:**
    - **CRITICAL Developer Action Required for AutoMod Functionality:**
        - `actionManager.js` (specifically the `executeAutomodAction` function or its equivalent) MUST be updated to handle `camelCase` `actionType` strings from `automodConfig.js` (e.g., expect 'tempBan' instead of 'TEMP_BAN' or 'TempBan').
        - **AutoMod will NOT function correctly and may break if `actionManager.js` is not updated to match the new `camelCase` `actionType` convention in `automodConfig.js`.**
    - **Developer Action Required for `chat_repeat_spam`:**
        - Identify the module/function for `checks.checkSpam` (referenced in `eventHandlers.js`).
        - Determine the exact `checkType` string this function uses when flagging for *repeat message spam*.
        - Verify `eventHandlers.js` correctly uses `config.spamRepeatCheckEnabled` (or another appropriate key if `checks.checkSpam` is a general spam handler) for the condition to call `checks.checkSpam`.
        - Update the `automodConfig.js` key (currently `"chat_repeat_spam"`) to the actual `checkType` if it differs.
    - **Developer Decision Required for 'example_' `checkType`s:**
        - For `speedCheck.js` (currently using `"example_speed_ground"`) and `reachCheck.js` (currently using `"example_reach_attack"`):
            - Decide whether to refactor these check scripts to use configurable action profile names from `config.js` (e.g., `config.groundSpeedActionProfileName || "movement_speed_ground"`).
            - If refactored, update the corresponding `checkType` keys in `automodConfig.js` (`automodRules` and `automodPerCheckTypeToggles`).
            - If not refactored, the current keys in `automodConfig.js` are technically correct based on current script usage, but remain non-standard.
    - **Post-Developer Review & General Refinement:**
        - Review all AutoMod rule thresholds and actions for balance and effectiveness.
        - Implement AutoMod rules for any other minor or uncovered checks if deemed necessary.
        - Consider if `flyCheck.js` and `speedCheck.js` need more granular AutoMod rules for different sub-types of violations beyond what's currently implemented (e.g., if they generate more specific `checkType`s that aren't yet covered).

## III. Recent User Feedback & Context for Future Work

*   **UI Command Design:** For future UI-based commands (e.g., a potential `!admin` command or enhancements to `!panel`), design them to be accessible by various permission levels, showing different information/buttons contextually (similar to the recent `!panel` refactor for player vs. admin views).
*   **Development Workflow:** Continue applying cleanup and refactoring "in batches" where appropriate.

---
*This summary was generated by Jules for session continuity.*
