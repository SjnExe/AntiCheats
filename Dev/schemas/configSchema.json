{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "AntiCheatConfig",
    "description": "Schema for the defaultConfigSettings object in AntiCheatsBP/scripts/config.js.",
    "type": "object",
    "properties": {
        "configVersion": {
            "type": "number",
            "description": "The version of the configuration file. Used for migration."
        },
        "adminTag": {
            "type": "string",
            "description": "The tag for identifying admin players. Note: This is a legacy setting. It is highly recommended to use the Rank System via `ranksConfig.js` instead."
        },
        "ownerPlayerName": {
            "type": "string",
            "description": "The exact name of the server owner. Case-sensitive. This value is used as a fallback if no owner is defined in `ranksConfig.js`."
        },
        "enableDebugLogging": {
            "type": "boolean",
            "description": "If true, enables detailed debug logging to the console for development and troubleshooting."
        },
        "prefix": {
            "type": "string",
            "description": "The prefix for chat-based commands (e.g., \"!\", \".\")."
        },
        "acGlobalNotificationsDefaultOn": {
            "type": "boolean",
            "description": "If true, admins will receive AntiCheat notifications by default. They can opt-out with a command."
        },
        "development": {
            "type": "object",
            "description": "Settings related to debugging and performance profiling.",
            "properties": {
                "enablePerformanceProfiling": {
                    "type": "boolean",
                    "description": "If true, enables collection and logging of performance metrics. SET TO FALSE FOR PRODUCTION."
                },
                "logPerformanceProfileIntervalTicks": {
                    "type": "number",
                    "description": "Interval in game ticks to log performance profile data if enabled."
                },
                "checkStaggerTicks": {
                    "type": "number",
                    "description": "Number of ticks to stagger checks over. Higher numbers reduce tick load but increase detection time. 1 = no stagger."
                }
            }
        },
        "playerTags": {
            "type": "object",
            "description": "Settings related to player status effects and tags.",
            "properties": {
                "vanished": {
                    "type": "string",
                    "description": "The tag applied to players who are vanished."
                },
                "frozen": {
                    "type": "string",
                    "description": "The tag applied to players who are frozen."
                }
            }
        },
        "playerInfo": {
            "type": "object",
            "description": "Settings for player welcome messages and informational messages.",
            "properties": {
                "enableWelcomer": { "type": "boolean" },
                "welcomeMessage": { "type": "string" },
                "notifyAdminOnNewPlayer": { "type": "boolean" },
                "enableDeathCoords": { "type": "boolean" },
                "deathCoordsMessage": { "type": "string" }
            }
        },
        "combatLog": {
            "type": "object",
            "properties": {
                "enabled": { "type": "boolean" },
                "thresholdSeconds": { "type": "number" }
            }
        },
        "tpa": {
            "type": "object",
            "properties": {
                "enabled": { "type": "boolean" },
                "requestTimeoutSeconds": { "type": "number" }
            }
        },
        "homes": {
            "type": "object",
            "properties": {
                "enabled": { "type": "boolean" },
                "maxHomes": { "type": "number" }
            }
        },
        "kits": {
            "type": "object",
            "properties": {
                "enabled": { "type": "boolean" }
            }
        },
        "economy": {
            "type": "object",
            "properties": {
                "enabled": { "type": "boolean" },
                "startingBalance": { "type": "number" }
            }
        },
        "spawnLocation": {
            "type": ["object", "null"],
            "properties": {
                "x": { "type": "number" },
                "y": { "type": "number" },
                "z": { "type": "number" },
                "dimension": { "type": "string" }
            }
        },
        "serverInfo": {
            "type": "object",
            "properties": {
                "discordLink": { "type": "string", "format": "uri" },
                "websiteLink": { "type": "string", "format": "uri" },
                "helpLinks": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "title": { "type": "string" },
                            "url": { "type": "string", "format": "uri" }
                        },
                        "required": ["title", "url"]
                    }
                },
                "generalHelpMessages": { "type": "array", "items": { "type": "string" } },
                "rules": { "type": "array", "items": { "type": "string" } }
            }
        },
        "chatChecks": {
            "type": "object",
            "properties": {
                "swear": { "$ref": "#/definitions/chatCheck" },
                "advertising": {
                    "type": "object",
                    "properties": {
                        "enabled": { "type": "boolean" },
                        "patterns": { "type": "array", "items": { "type": "string" } },
                        "whitelist": { "type": "array", "items": { "type": "string" } },
                        "actionProfile": { "type": "string" }
                    }
                },
                "caps": { "$ref": "#/definitions/chatCheck" },
                "charRepeat": { "$ref": "#/definitions/chatCheck" },
                "symbolSpam": { "$ref": "#/definitions/chatCheck" },
                "fastMessage": { "$ref": "#/definitions/chatCheck" }
            }
        },
        "antiGrief": {
            "type": "object",
            "properties": {
                "tnt": { "$ref": "#/definitions/griefAction" },
                "wither": { "$ref": "#/definitions/griefAction" },
                "fire": { "$ref": "#/definitions/griefAction" },
                "lava": { "$ref": "#/definitions/griefAction" },
                "water": { "$ref": "#/definitions/griefAction" }
            }
        },
        "worldBorder": {
            "type": "object",
            "properties": {
                "enabled": { "type": "boolean" },
                "knownDimensions": { "type": "array", "items": { "type": "string" } },
                "warningMessage": { "type": "string" },
                "damage": {
                    "type": "object",
                    "properties": {
                        "enabled": { "type": "boolean" },
                        "amount": { "type": "number" },
                        "intervalTicks": { "type": "number" },
                        "teleportAfterEvents": { "type": "number" }
                    }
                },
                "visuals": {
                    "type": "object",
                    "properties": {
                        "enabled": { "type": "boolean" },
                        "particleName": { "type": "string" },
                        "range": { "type": "number" },
                        "density": { "type": "number" },
                        "wallHeight": { "type": "number" }
                    }
                }
            }
        },
        "xrayNotify": {
            "type": "object",
            "properties": {
                "enabled": { "type": "boolean" },
                "monitoredOres": { "type": "array", "items": { "type": "string" } },
                "notifyAdminsByDefault": { "type": "boolean" }
            }
        },
        "soundEvents": {
            "type": "object",
            "patternProperties": {
                "^[a-zA-Z0-9]+$": {
                    "type": "object",
                    "properties": {
                        "enabled": { "type": "boolean" },
                        "soundId": { "type": "string" },
                        "volume": { "type": "number" },
                        "pitch": { "type": "number" },
                        "target": { "type": "string" }
                    }
                }
            }
        },
        "commandSettings": {
            "type": "object",
            "patternProperties": {
                "^[a-zA-Z0-9]+$": {
                    "type": "object",
                    "properties": {
                        "enabled": { "type": "boolean" }
                    }
                }
            }
        },
        "automod": {
            "type": "object",
            "properties": {
                "enabled": { "type": "boolean" },
                "defaultMuteDuration": { "type": "string" }
            }
        },
        "checks": {
            "type": "object",
            "description": "Master toggles and settings for various check categories.",
            "patternProperties": {
                "^[a-zA-Z0-9]+$": {
                    "type": "object",
                    "properties": {
                        "enabled": { "type": "boolean" },
                        "intervalTicks": { "type": "number" }
                    },
                    "required": ["enabled"]
                }
            }
        }
    },
    "required": [
        "configVersion",
        "adminTag",
        "ownerPlayerName",
        "enableDebugLogging",
        "prefix",
        "acGlobalNotificationsDefaultOn",
        "development",
        "playerTags",
        "playerInfo",
        "combatLog",
        "tpa",
        "homes",
        "kits",
        "economy",
        "serverInfo",
        "chatChecks",
        "antiGrief",
        "worldBorder",
        "xrayNotify",
        "soundEvents",
        "commandSettings",
        "automod",
        "checks"
    ],
    "definitions": {
        "chatCheck": {
            "type": "object",
            "properties": {
                "enabled": { "type": "boolean" },
                "actionProfile": { "type": "string" }
            },
            "additionalProperties": true
        },
        "griefAction": {
            "type": "object",
            "properties": {
                "enabled": { "type": "boolean" },
                "allowAdmins": { "type": "boolean" },
                "action": { "type": "string" }
            }
        }
    }
}
